<!doctype html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>routes</title>
    <link rel="stylesheet" href="style/bootstrap.min.css">
</head>
<body>
<div class="container">
    <ul class="nav nav-tabs">
        <li ng-class="{active:'home'== current}"><a href="" ui-sref="home">管理首页</a></li>
        <li ng-class="{active:'user'== current}" ><a href="" ui-sref="user">用户管理</a></li>
        <li ng-class="{active:'profile'== current}"><a href="" ui-sref="profile">个人信息</a></li>
    </ul>
    <div ui-view>

    </div>
</div>

<script src="../script/angular.js"></script>
<script src="../script/angular-ui-route.js"></script>
<script src="../script/angular-animate.min.js"></script>
<script>
    /*
     *  app ->config -> run ->
     * */

    var app = angular.module('myApp', ['ui.router']);
    /*
     * 初始化方法
     * */
    app.run(function ($rootScope) {
        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, formState, formParams) {
            $rootScope.current = toState.name;
        });
    });
    /*
     * 配置路由
     * */
    app.config(function ($stateProvider) {
        $stateProvider.state('home', {
            url: "/home",
            templateUrl: './tmpl/home.html',
            controller: 'homeCtrl'
        }).state('user', {
            url: "/user",
            templateUrl: './tmpl/user.html',
            controller: 'userCtrl'
        }).state('profile', {
            url: "/profile",
            templateUrl: './tmpl/profile.html',
            controller: 'profileCtrl',
            needLogin:true
        })
    });

    /*
     * 配置控制器
     * */
    app.controller('homeCtrl', function ($scope) {
        $scope.name = 'home';
    });
    app.controller('userCtrl', function ($scope) {
        $scope.name = 'user';
    });
    app.controller('profileCtrl', function ($scope) {
        $scope.name = 'profile';
    });

</script>
</body>
</html>