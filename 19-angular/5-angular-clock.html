<!doctype html>
<html lang="en" ng-app="infonx">
<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.css"/>
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.css"/>
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="lib/bower_components/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>

<div ng-controller="ClockCtrl">
    数据格式：<input type="text" name="" id="" ng-model="format">

    <hr>

    当前时间 <span current-time="format"></span>
</div>

<script src="lib/bower_components/angular/angular.js"></script>
<script>
    angular.module('infonx', []);
    angular.module('infonx').controller('ClockCtrl', function ($scope) {
        $scope.format = 'yyyy-M-dd hh:mm:ss';
    });

    angular.module('infonx').directive('currentTime', function ($interval, $filter) {
        return {
            link: function (scope, element, attrs) {
                function updateTime() {
                    element.text($filter('date')(new Date(), scope[attrs.currentTime]));
                }
                scope.$watch(attrs.currentTime, updateTime);
                timeoutId = $interval(updateTime, 1000);

                element.on('$destroy', function () {
                    $interval.cancel(timeoutId);
                })
            }
        }
    });

</script>
</body>
</html>

